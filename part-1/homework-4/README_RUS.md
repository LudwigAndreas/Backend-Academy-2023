# Tinkoff Backend Academy homework 4

Проcтая веб CRUD база данных для магазина с категориями.

## Contents

1. [Information](#information)
2. [Part 1](#part-1-implementation)

## Information

**Название проекта**: Домашнее задание Tinkoff Backend Academy 4 - Простая веб CRUD база данных с категориями.

**Описание**:
Этот проект представляет собой простое веб-приложение, которое хранит и извлекает основную информацию о продуктах: SKU, название, цена и количество. Приложение предоставляет HTTP-эндпоинты для добавления, обновления и удаления продуктов, а также для получения списка всех продуктов. Проект использует два разных варианта хранения: хранение в памяти и файловое хранение. Пользователь может выбрать вариант хранения, установив свойство в конфигурации приложения. В этой версии проект был расширен для включения категорий продуктов. Каждый продукт может быть назначен к категории, и продукты без указанной категории добавляются в категорию по умолчанию. Приложение предоставляет HTTP-эндпоинты для управления категориями, включая добавление, обновление и удаление категорий, а также получение списка всех категорий и продуктов в каждой категории.

**Используемые технологии:**

- **Язык программирования:** Java 17, Spring Framework
- **Инструменты разработки:** IntelliJ IDEA, Gradle
- **Контроль версий:** Git

**Ключевые особенности:**

- **Создание продукта:** Добавление новых продуктов с уникальным SKU и назначение их категории.
- **Чтение продуктов:** Отображение списка всех продуктов в формате JSON, включая категорию для каждого продукта.
- **Обновить продукт:** Обновление информации о существующем продукте по его SKU.
- **Удалить продукт:** Удаление продукта из базы данных по его SKU.
- **Добавить категорию:** Добавить новую категорию с уникальным URL и ID.
- **Список категорий:** Отображение списка всех категорий в формате JSON, включая продукты в каждой категории.
- **Обновить категорию:** Обновление информации о существующей категории по ее ID.
- **Удалить категорию:** Удалить категорию из базы данных по ее ID.
- **Варианты хранения:** Выбор между хранением в памяти и файловым хранением, установив свойство в конфигурации приложения.

**Детали реализации:**

- **Варианты хранения:** Приложение поддерживает два варианта хранения: хранение в памяти и файловое хранение.
- **HTTP-эндпоинты:** Приложение предоставляет восемь HTTP-эндпоинтов для управления продуктами и категориями: POST, GET, PUT и DELETE для продуктов и категорий.
- **Валидация:** Приложение проверяет SKU и URL категории, чтобы гарантировать их уникальность и содержание только допустимых символов.

**Инструкции по использованию:**

1. Запустите приложение, запустив основной класс.
2. Используйте HTTP-клиент для отправки запросов в приложение.
3. Установите вариант хранения в конфигурации приложения.
4. Отправляйте POST, GET, PUT и DELETE запросы для управления продуктами и категориями.
5. Просматривайте ответ от приложения, чтобы увидеть результаты запросов.

**Цели проекта:**

- Реализовать простое веб CRUD-приложение с использованием Spring Framework.
- Изучить создание HTTP-эндпоинтов для добавления, обновления и удаления данных.
- Практикова работы с различными вариантами хранения в веб-приложении.
- Расширить приложение для включения категорий для продуктов и управления категориями с помощью HTTP-эндпоинтов.

## Part 1. Implementation

В сервис из задания 3 добавить сущность категория которая при получении названия формирует url латиницей и получает уникальный id (кухонная техника -> cuhonnaya_technika). Товары без указанной категории добавляются в дефолтную категорию. В запросы добавить поле категория, куда будет добавлен товар. Если категория не найдена возвращать ошибку.

Реализовать 5 http-endpoint:

1. `POST /category` - Добавить новую категорию. Информация о категории возвращается в теле ответа в формате json.
2. `GET /category` - Вывести на экран список всех ранее добавленных категорий. Категории должны содержать вложенные списки товаров. Метод должен вернуть список всех товаров в формате json.
3. `GET /category/$categoryId` - Вывести на экран список всех ранее добавленных товаров в данную категорию. Категория должна содержать вложенный список товаров. Метод должен вернуть категорию и список всех товаров в формате json.
4. `PUT /category/$categoryId` - Обновить информацию о категории по id.

5. `DELETE /category/$categoryId` - Удалить категорию с заданным id.

Обязательные требования:

1. url категории должен быть уникальным.
2. Необходимо покрыть код unit и интеграционными тестами.

Не обязательное:
Обеспечить уникальное значение id для нескольких одновременных созданий категорий не прибегая к блокировкам и покрыв этот кейс тестом.

## Part 2. Bonus

Задание для тех кто хочет использовать базу.

1. Добавить postgres
2. Генерацию айди сделать самостоятельно не используя bigSerial и прочие автоинкрементальные типы. Постараться покрыть тестом их конкурентное обновление.
3. Использовать [liquibase](https://www.baeldung.com/liquibase-refactor-schema-of-java-app) для генерации схемы базы и последующих миграций.
4. Покрыть код работающий с базой тестами используя [testContainer](https://www.baeldung.com/docker-test-containers)
